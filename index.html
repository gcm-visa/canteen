<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ChillEat</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>

<button id="installBtn" style="display:none; padding:20px; font-size:20px;">
  Install ChillEat App
</button>

<script>
let deferredPrompt;

// INSTALL BUTTON SHOULD SHOW WHEN INSTALLABLE
window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById("installBtn").style.display = "block";
});

// WHEN CLICK â†’ PROMPT INSTALL
document.getElementById("installBtn").addEventListener("click", async () => {
  deferredPrompt.prompt();
  const result = await deferredPrompt.userChoice;
  if (result.outcome === "accepted") {
    localStorage.setItem("installed", "yes");
    window.location.href = "redirect.html";
  }
});

// REGISTER SW
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
